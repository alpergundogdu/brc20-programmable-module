import requests

def test_btc_precompile_multiple_vin_vout():
    response = requests.post(
        "http://localhost:18545",
        json={
            "jsonrpc": "2.0",
            "method": "eth_call",
            "params": {
                "from": "0x1234567890123456789012345678901234567890",
                "to": "0x00000000000000000000000000000000000000fd",
                # https://mempool.space/signet/tx/d09d26752d0a33d1bdb0213cf36819635d1258a7e4fcbe669e12bc7dab8cecdd
                "data": "0x96327323000000000000000000000000000000000000000000000000000000000000004064303964323637353264306133336431626462303231336366333638313936333564313235386137653466636265363639653132626337646162386365636464",
            },
            "id": 65,
        },
    )
    # Test for the decoded values of this result is in server/src/evm/btc_precompile.rs
    assert response.status_code == 200
    assert (
        response.json()["result"]["resultBytes"]
        == "0x000000000000000000000000000000000000000000000000000000000003ad4000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000002c0000000000000000000000000000000000000000000000000000000000000036000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004038643462633361633231323131373233343336653335666662663332613538663734666539343265306561313039333635303464623037616662316166376333000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000130000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000443531323034613630343166353462386366386232643438633666373235636230353134653531653565376537616334323963333364613632653938373635646436326633000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000098968000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002c3030313466343737393532663333353631633162383961316665396632383638326636323332363365313539000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000935e90"
    )


if __name__ == "__main__":
    test_btc_precompile_multiple_vin_vout()
