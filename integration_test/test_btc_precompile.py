import requests


def test_btc_precompile():
    response = requests.post(
        "http://localhost:18545",
        json={
            "jsonrpc": "2.0",
            "method": "eth_call",
            "params": {
                "from": "0x1234567890123456789012345678901234567890",
                "to": "0x00000000000000000000000000000000000000fd",
                # getTxDetails(ab6baebc91d645aade178f952bf75e62735b37ee692717e090b1b1f2a2b243ba) on testnet4
                "data": "0x96327323000000000000000000000000000000000000000000000000000000000000004061623662616562633931643634356161646531373866393532626637356536323733356233376565363932373137653039306231623166326132623234336261",
            },
            "id": 65,
        },
    )
    assert response.status_code == 200
    assert (
        response.json()["result"]["resultBytes"]
        == "0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000005a5b600000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000014a00000000000000000000000000000000000000000000000000000000000000403630393262653136353461363939373365663034316366633932353736303939393734623762633366383035633762336162666364346337613430363238616100000000000000000000000000000000000000000000000000000000000000443531323062353339656566646438633237346161613934623738666635626263346437363834363438303330363363353735383238313438633364393134306165366236000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044353132306663646335613762643636623464336138633931663161316366393461643764353631663361333034626631386661663536373862316565343765373833623700000000000000000000000000000000000000000000000000000000"
    )


if __name__ == "__main__":
    test_btc_precompile()
