import requests

def test_btc_precompile_multiple_vin_vout():
    response = requests.post(
        "http://localhost:18545",
        json={
            "jsonrpc": "2.0",
            "method": "eth_call",
            "params": {
                "from": "0x1234567890123456789012345678901234567890",
                "to": "0x00000000000000000000000000000000000000fd",
                # https://mempool.space/testnet4/tx/4183fb733b9553ca8b93208c91dda18bee3d0b8510720b15d76d979af7fd9926
                "data": "0x96327323000000000000000000000000000000000000000000000000000000000000004034313833666237333362393535336361386239333230386339316464613138626565336430623835313037323062313564373664393739616637666439393236",
            },
            "id": 65,
        },
    )
    # Test for the decoded values of this result is in server/src/evm/btc_precompile.rs
    assert response.status_code == 200
    assert (
        response.json()["result"]["resultBytes"]
        == "0x000000000000000000000000000000000000000000000000000000000001870b00000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000004e000000000000000000000000000000000000000000000000000000000000008c000000000000000000000000000000000000000000000000000000000000009a00000000000000000000000000000000000000000000000000000000000000b00000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000001e0000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000002a00000000000000000000000000000000000000000000000000000000000000040366539326335316331633061333931303263303466383830616538666533316438326637393461393136303861333835656363393339333666656536303338360000000000000000000000000000000000000000000000000000000000000040323638636233653264333939646262386463656365366166663634366632373531613634356562633833333033333161633366613532353461643632613465380000000000000000000000000000000000000000000000000000000000000040343233643238303332626237623437643264663461616134323738396439383137643634313966393734376663313033343363366664663364303831666632620000000000000000000000000000000000000000000000000000000000000040646638356635346135356363653930363961326562663535643632343635333137333137356631386165363562653966613763633938333933303030626231360000000000000000000000000000000000000000000000000000000000000040366534346564666638323734366537353763646437356265633663613633383937633634653263373665323864313163316163616662383038346533626633630000000000000000000000000000000000000000000000000000000000000040646232366433646438313232656137306464666234366334333265633062366531323632623163343436323137373237313561323837346562636263376239360000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000002c00000000000000000000000000000000000000000000000000000000000000340000000000000000000000000000000000000000000000000000000000000004435313230353137343439386635393430313138343631623466333030366537356466633066663134306166666663396163396232393337373931613164633364313764300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000443531323035313734343938663539343031313834363162346633303036653735646663306666313430616666666339616339623239333737393161316463336431376430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044353132303531373434393866353934303131383436316234663330303665373564666330666631343061666666633961633962323933373739316131646333643137643000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004435313230353137343439386635393430313138343631623466333030366537356466633066663134306166666663396163396232393337373931613164633364313764300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000443531323035313734343938663539343031313834363162346633303036653735646663306666313430616666666339616339623239333737393161316463336431376430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044353132303531373434393866353934303131383436316234663330303665373564666330666631343061666666633961633962323933373739316131646333643137643000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000186a000000000000000000000000000000000000000000000000000000000000186a000000000000000000000000000000000000000000000000000000000000186a000000000000000000000000000000000000000000000000000000000000186a000000000000000000000000000000000000000000000000000000000000186a000000000000000000000000000000000000000000000000000000000000186a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000443531323035303932376532396430643631623264306538353566643032376637646366613864306337343132646239626362363961656363663334643837633830373164000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044353132303531373434393866353934303131383436316234663330303665373564666330666631343061666666633961633962323933373739316131646333643137643000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000900b000000000000000000000000000000000000000000000000000000000000024f5"
    )


if __name__ == "__main__":
    test_btc_precompile_multiple_vin_vout()
